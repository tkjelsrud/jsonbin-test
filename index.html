<html>
<head>
  <style>
    .ok {
      background-color: green;
    }
    .fail {
      background-color: red;
    }
  </style>
</head>

<body>
  <div id="label"><h3>Testset - jsonbin</h3></div>
  <div id="test-connection">Test: Connection towards jsonbin</div>
  <div id="test-post">Test: Posting data</div>
  
  <script type="text/javascript">

    const request = new Request('https://api.jsonbin.io/v3/b/636b5cc80e6a79321e4449a4/latest', {
      method: 'GET',
       headers: {
        'Content-Type': 'application/json',
        'X-Access-Key': '$2b$10$7JrtwZS4.ENCVXramO.ANO7AtKjtvmmazkfq9QtZ43ABECNSD3/7'
      }
     });

     fetch(request).then((response) => {
      console.log(response);
      if(response.status == 200)
        document.getElementById("test-connection").classList.add("ok");
      else
        document.getElementById("test-connection").classList.add("fail");
    });
    
    /*const reqPost = new Request('https://api.jsonbin.io/v3/b/636b5cc80e6a79321e4449a4/latest', {
      method: 'PUT',
       headers: {
        'Content-Type': 'application/json',
        'X-Master-Key': '$2b$10$PiP9T5fJTCjMJCMoI9alZOdI2aRZtrG67mc0qrw384sGTLiuxYxja'
        //'X-Access-Key': '$2b$10$7JrtwZS4.ENCVXramO.ANO7AtKjtvmmazkfq9QtZ43ABECNSD3/7'
       },
       data: JSON.stringify({hello: 'world'})
      });

     fetch(reqPost).then((response) => {
      console.log(response);
      if(reqPost.status == 200)
        document.getElementById("test-post").classList.add("ok");
      else
        document.getElementById("test-post").classList.add("fail");
    });*/
    
    fetch('https://jsonplaceholder.typicode.com/posts/1',{
      method:'PUT',
      headers:{
        'Content-Type':'application/json',
        'X-Master-Key': '$2b$10$PiP9T5fJTCjMJCMoI9alZOdI2aRZtrG67mc0qrw384sGTLiuxYxja'
      },
      body:JSON.stringify({'record': 'hello world'})
    }).then(response=>{
      console.log(response);
      return response.json();
    }).then(data=> 
      // this is the data we get after putting our data,
      console.log(data);
      document.getElementById("test-post").classList.add("ok");
    );

  </script>
</body>
</html>
